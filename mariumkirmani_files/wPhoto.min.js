"use strict";define("wPhoto",["lodash","react","core","santaProps","utils","image","zoomedImage"],function(t,i,n,e,o,a,s){function r(t,i){return i&&("goToLink"===t||!t)||"zoomMode"===t}function c(n,e,o,a,s,c,p,d,h){var l={style:{}};return l.style.width=s.width,l.style.height=s.height,r(a,o)&&(l.style.cursor="pointer"),"zoomMode"===a?t.assign(l,d(h,c,n,null,e,null)):!o||"goToLink"!==a&&a?l.parentConst=i.DOM.div:t.assign(l,p(o,h,c)),l}function p(t,i){return this.createChildComponent(this.props.compData,t,"img",i)}function d(t,i){return{id:t.id+"img",ref:"img",containerWidth:i.width,containerHeight:i.height,displayMode:C[t.compProp.displayMode]||t.compProp.displayMode,filterEffect:t.compProp.filterEffect,imageData:t.compData,addItemProp:t.addItemProp}}function h(i,n,e){var o;return this.state.isInZoom?(i.className=this.classSet({zoomedin:!0}),i.initialClickPosition=this.state.initialClickPosition,o=p.call(this,"core.components.ZoomedImage",i),n.onMouseLeave=u.bind(this),n.onMouseEnter=f.bind(this)):(i.className=this.classSet({zoomedout:!0}),o=p.call(this,"core.components.Image",i),n.onMouseLeave=t.noop,n.onMouseEnter=t.noop),t.assign(e,n),o}function l(t,i,n,e){var o=d(this.props,t),a={onClick:m.bind(this)};return!n||P(i,t)?p.call(this,"core.components.Image",o):h.call(this,o,a,e)}function g(i,n,e,o){var a={style:t.cloneDeep(i)};return a.style.width=n.width,a.style.height=n.height,a["data-exact-height"]=n.exactHeight,a["data-content-padding-horizontal"]=e.contentPaddingHorizontal,a["data-content-padding-vertical"]=e.contentPaddingVertical,a.title=o,a}function m(t){var i=this,n=this.state.isInZoom;this.registerReLayout(),n?this.refs.img.zoomOut(function(){i.setState({isInZoom:!n})}):this.setState({isInZoom:!n,initialClickPosition:{clientX:t.clientX,clientY:t.clientY}})}function u(t){var i=this;f.call(this),this.zoomTimer=setTimeout(function(){m.apply(i,[t])},w)}function f(){clearTimeout(this.zoomTimer)}function P(t,i){return t.width<i.width||t.height<i.height}function y(t,i){var n={},e=parseInt(t.contentPaddingLeft.value||0,10)+parseInt(i.contentPaddingLeft||0,10),o=parseInt(t.contentPaddingRight.value||0,10)+parseInt(i.contentPaddingRight||0,10),a=parseInt(t.contentPaddingTop.value||0,10)+parseInt(i.contentPaddingTop||0,10),s=parseInt(t.contentPaddingBottom.value||0,10)+parseInt(i.contentPaddingBottom||0,10);return n.contentPaddingHorizontal=e+o,n.contentPaddingVertical=a+s,n}function I(t,i){var n=t.width-i.contentPaddingHorizontal,e=t.height-i.contentPaddingVertical;return{width:n>0?n:16,height:e>0?e:16}}function T(t,i){return{width:t.width+i.contentPaddingHorizontal,height:t.height+i.contentPaddingVertical,exactHeight:(t.exactHeight||t.height)+i.contentPaddingVertical}}var k=o.linkRenderer,v=n.compMixins,w=1200,C={fitWidthStrict:o.imageUtils.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:o.imageUtils.fittingTypes.LEGACY_FIT_HEIGHT};return{displayName:"WPhoto",propTypes:t.assign({id:e.Types.Component.id,compData:e.Types.Component.compData.isRequired,compProp:e.Types.Component.compProp.isRequired,structure:e.Types.Component.structure,linkRenderInfo:e.Types.Link.linkRenderInfo.isRequired,rootNavigationInfo:e.Types.Component.rootNavigationInfo.isRequired},e.santaTypesUtils.getSantaTypesByDefinition(a),e.santaTypesUtils.getSantaTypesByDefinition(s)),statics:{useSantaTypes:!0},mixins:[v.skinBasedComp,v.skinInfo,v.animationsMixin],getInitialState:function(){return this.zoomTimer=null,{isInZoom:!1}},getSkinProperties:function(){var i=this.props.structure.propertyQuery,n=this.props.compData.link||null,e=this.props.compProp.onClickBehavior,a=this.props.compProp.displayMode,s=t.pick(this.props.style,["width","height"]),r={width:this.props.compData.width,height:this.props.compData.height},p=y(this.getParams(["contentPaddingLeft","contentPaddingRight","contentPaddingBottom","contentPaddingTop"]),this.getSkinExports()),d=o.imageUtils.getContainerSize(I(s,p),r,C[a]||a),h=T(d,p),m=g(this.props.style,h,p,this.props.compData.title);return{"":m,img:l.call(this,d,r,"zoomAndPanMode"===e,m),link:c(this.props.compData,i,n,e,d,this.props.rootNavigationInfo,k.renderLink,k.renderImageZoomLink,this.props.linkRenderInfo)}},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.photo.DefaultPhoto"}}});
//# sourceMappingURL=wPhoto.min.js.map